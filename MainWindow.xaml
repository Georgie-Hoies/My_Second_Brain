<Window x:Class="My_Second_Brain.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:My_Second_Brain"
        mc:Ignorable="d"
        Title="My Second Brain (WPF)" Height="768" Width="1280"
        WindowStartupLocation="CenterScreen">

	<Window.Resources>
		<Style TargetType="TabItem">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Padding" Value="15,8"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Background" Value="Transparent"/>
		</Style>
	</Window.Resources>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
		</Grid.RowDefinitions>

		<Border Grid.Row="0" Background="#F3F3F3" BorderBrush="#DDDDDD" BorderThickness="0,0,0,1">
			<TabControl Background="Transparent" BorderThickness="0" Margin="0,5,0,0">

				<TabItem Header="Home">
					<StackPanel Orientation="Horizontal" Margin="10,10,10,15" VerticalAlignment="Center">
						<GroupBox Header="History" Margin="0,0,15,0" Padding="5">
							<StackPanel Orientation="Horizontal">
								<Button Content="↩️ Undo (Ctrl+Z)" Click="OnUndoClick" Padding="10,5" Margin="0,0,5,0" Background="White"/>
								<Button Content="↪️ Redo (Ctrl+Y)" Click="OnRedoClick" Padding="10,5" Background="White"/>
							</StackPanel>
						</GroupBox>

						<GroupBox Header="File" Padding="5">
							<StackPanel Orientation="Horizontal">
								<Button Content="💾 Save" Click="OnSaveClick" Padding="10,5" Margin="0,0,5,0" Background="White"/>
								<Button Content="📂 Load" Click="OnLoadClick" Padding="10,5" Margin="0,0,5,0" Background="White"/>
								<Button Content="🗑️ Clear All" Click="OnClearCanvas" Padding="10,5" Background="White" Foreground="Red"/>
							</StackPanel>
						</GroupBox>
					</StackPanel>
				</TabItem>

				<TabItem Header="Draw" IsSelected="True">
					<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" PanningMode="HorizontalOnly" x:Name="ToolbarScrollViewer">
						<StackPanel Orientation="Horizontal" Margin="10,10,10,15" VerticalAlignment="Center">

							<GroupBox Header="Tools" Margin="0,0,15,0" Padding="5">
								<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
									<RadioButton x:Name="ToolSelect" Content="🖐️ Select" GroupName="Tools"
                                                 Click="OnToolChanged" Tag="Select" Margin="0,0,10,0" FontSize="14" Cursor="Hand" Padding="5"/>

									<RadioButton x:Name="ToolText" Content="🔤 Text" GroupName="Tools"
                                                 Click="OnToolChanged" Tag="Text" Margin="0,0,10,0" FontSize="14" Cursor="Hand" Padding="5"/>

									<RadioButton x:Name="ToolPen" Content="🖊️ Pen" GroupName="Tools" IsChecked="True"
                                                 Click="OnToolChanged" Tag="Pen" Margin="0,0,10,0" FontSize="14" Cursor="Hand" Padding="5"/>

									<RadioButton x:Name="ToolHighlighter" Content="🖍️ Highlighter" GroupName="Tools"
                                                 Click="OnToolChanged" Tag="Highlighter" Margin="0,0,10,0" FontSize="14" Cursor="Hand" Padding="5"/>

									<RadioButton x:Name="ToolEraser" GroupName="Tools"
                                                 Click="OnToolChanged" Tag="Eraser"
                                                 FontSize="14" Cursor="Hand" Padding="5"
                                                 ToolTip="Click again or Right-click to change mode">
										<RadioButton.Content>
											<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
												<TextBlock Text="🧹 Eraser" VerticalAlignment="Center"/>
												<Path Data="M 0,0 L 4,4 L 8,0"
                                                      Stroke="#666666" StrokeThickness="1.5"
                                                      VerticalAlignment="Center" Margin="6,2,0,0"
                                                      SnapsToDevicePixels="True">
													<Path.Style>
														<Style TargetType="Path">
															<Setter Property="Visibility" Value="Collapsed"/>
															<Style.Triggers>
																<DataTrigger Binding="{Binding IsChecked, RelativeSource={RelativeSource AncestorType=RadioButton}}" Value="True">
																	<Setter Property="Visibility" Value="Visible"/>
																</DataTrigger>
															</Style.Triggers>
														</Style>
													</Path.Style>
												</Path>
											</StackPanel>
										</RadioButton.Content>

										<RadioButton.ContextMenu>
											<ContextMenu>												<MenuItem Header="Types" IsEnabled="False" FontWeight="Bold" Foreground="Gray"/>
												<Separator/>
												<MenuItem Header="Stroke Eraser" Tag="Stroke" Click="OnEraserMenuClick" IsCheckable="True" IsChecked="True"/>
												<MenuItem Header="Point Eraser" Tag="Point" Click="OnEraserMenuClick" IsCheckable="True"/>
											</ContextMenu>
										</RadioButton.ContextMenu>
									</RadioButton>
								</StackPanel>
							</GroupBox>

							<GroupBox Header="Properties" Margin="0,0,15,0" Padding="5">
								<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
									<Border Width="24" Height="24" CornerRadius="12" Background="Black" Margin="0,0,5,0" MouseLeftButtonDown="OnColorPicked" Cursor="Hand" ToolTip="Black"/>
									<Border Width="24" Height="24" CornerRadius="12" Background="#FF3B30" Margin="0,0,5,0" MouseLeftButtonDown="OnColorPicked" Cursor="Hand" ToolTip="Red"/>
									<Border Width="24" Height="24" CornerRadius="12" Background="#007AFF" Margin="0,0,5,0" MouseLeftButtonDown="OnColorPicked" Cursor="Hand" ToolTip="Blue"/>
									<Border Width="24" Height="24" CornerRadius="12" Background="#34C759" Margin="0,0,15,0" MouseLeftButtonDown="OnColorPicked" Cursor="Hand" ToolTip="Green"/>

									<TextBlock Text="Size" VerticalAlignment="Center" Foreground="#666666" Margin="0,0,5,0"/>
									<Slider x:Name="SizeSlider" Width="100" Minimum="1" Maximum="30" Value="4"
                                            ValueChanged="OnSizeChanged" VerticalAlignment="Center" IsMoveToPointEnabled="True" Margin="0,0,15,0"/>

									<CheckBox x:Name="CheckCalligraphy" Content="✒️ Calligraphy"
                                              Checked="OnAttributeChanged" Unchecked="OnAttributeChanged"
                                              VerticalAlignment="Center" FontSize="14" Cursor="Hand"/>

								</StackPanel>
							</GroupBox>
						</StackPanel>
					</ScrollViewer>
				</TabItem>

				<TabItem Header="View">
					<StackPanel Orientation="Horizontal" Margin="10,10,10,15" VerticalAlignment="Center">
						<GroupBox Header="Paper Style" Padding="5">
							<StackPanel Orientation="Horizontal" VerticalAlignment="Center">
								<TextBlock Text="Background:" VerticalAlignment="Center" Margin="0,0,10,0"/>
								<ComboBox Width="150" SelectionChanged="OnPaperStyleChanged" VerticalAlignment="Center" Cursor="Hand">
									<ComboBoxItem Content="None (Plain White)" Tag="None" IsSelected="True"/>
									<ComboBoxItem Content="Rule Lines" Tag="Rule"/>
									<ComboBoxItem Content="Grid Lines" Tag="Grid"/>
								</ComboBox>
							</StackPanel>
						</GroupBox>
					</StackPanel>
				</TabItem>

			</TabControl>
		</Border>

		<ScrollViewer x:Name="MainScrollViewer" Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Background="#FAFAFA">
			<InkCanvas x:Name="MainInkCanvas" Width="5000" Height="5000" Background="White" Loaded="OnInkCanvasLoaded" MoveEnabled="False">
				<InkCanvas.Effect>
					<DropShadowEffect Color="#888888" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
				</InkCanvas.Effect>
			</InkCanvas>
		</ScrollViewer>
	</Grid>
</Window>